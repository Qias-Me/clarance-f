# Test info

- Name: Section 5 - Initial Entry Behavior >> should allow adding more entries up to 4 total
- Location: C:\Users\Jason\Desktop\AI-Coding\clarance-f\tests\section5\section5-initial-entry.test.ts:52:3

# Error details

```
Error: page.click: Test timeout of 30000ms exceeded.
Call log:
  - waiting for locator('[data-testid="section-section5-nav-button"]')

    at C:\Users\Jason\Desktop\AI-Coding\clarance-f\tests\section5\section5-initial-entry.test.ts:19:16
```

# Page snapshot

```yaml
- banner:
  - heading "SF-86 Questionnaire for National Security Positions" [level=1]
  - text: "Form Version: 2024.1 â€¢ Updated: 6/8/2025 Environment: development Progress: 0/30"
- main:
  - img
  - heading "Form Management" [level=2]
  - paragraph: Validate, save, and generate PDFs
  - button "Validate All":
    - img
    - text: Validate All
  - button "Save Form":
    - img
    - text: Save Form
  - button "Server PDF":
    - img
    - text: Server PDF
  - button "Client PDF":
    - img
    - text: Client PDF
  - button "Clear Cache":
    - img
    - text: Clear Cache
  - button "Expand":
    - img
    - text: Expand
  - img
  - 'heading "Development Mode: Enhanced PDF Generation" [level=3]'
  - text: Server PDF Generation Processes PDF on server with comprehensive terminal logging Client PDF Generation Uses advanced field mapping with browser console logging
  - img
  - strong: "Server:"
  - text: Check terminal for detailed logs
  - img
  - strong: "Client:"
  - text: Check browser console (F12) for field mapping stats
  - 'heading "Section 1: Information About You" [level=2]'
  - paragraph: Provide your full legal name as it appears on official documents.
  - text: Last Name *
  - textbox "Last Name *"
  - paragraph: Enter your last name exactly as it appears on your birth certificate or passport.
  - text: First Name *
  - textbox "First Name *"
  - paragraph: Enter your first name exactly as it appears on your birth certificate or passport.
  - text: Middle Name
  - textbox "Middle Name"
  - paragraph: Enter your middle name if you have one. Leave blank if not applicable.
  - text: Suffix
  - combobox "Suffix":
    - option "Select suffix (if applicable)" [selected]
    - option "Jr."
    - option "Sr."
    - option "II"
    - option "III"
    - option "IV"
    - option "V"
  - paragraph: Select your name suffix if applicable (Jr., Sr., II, III, etc.).
  - text: "* Required fields"
  - button "Submit & Continue"
  - button "Clear Section"
  - text: "Section Status: Ready for input Validation: Has errors"
```

# Test source

```ts
   1 | /**
   2 |  * Section 5 Initial Entry Test
   3 |  * 
   4 |  * Tests that Section 5 only renders 1 entry when user selects "Yes"
   5 |  * and allows adding more entries up to 4 total.
   6 |  */
   7 |
   8 | import { test, expect } from '@playwright/test';
   9 |
   10 | test.describe('Section 5 - Initial Entry Behavior', () => {
   11 |   test.beforeEach(async ({ page }) => {
   12 |     // Navigate to the form
   13 |     await page.goto('http://localhost:5174/startForm');
   14 |     
   15 |     // Wait for the page to load
   16 |     await page.waitForLoadState('networkidle');
   17 |     
   18 |     // Navigate to Section 5
>  19 |     await page.click('[data-testid="section-section5-nav-button"]');
      |                ^ Error: page.click: Test timeout of 30000ms exceeded.
   20 |     
   21 |     // Wait for Section 5 to load
   22 |     await page.waitForSelector('[data-testid="section5-form"]');
   23 |   });
   24 |
   25 |   test('should show no entries initially', async ({ page }) => {
   26 |     // Initially, no entries should be visible
   27 |     const entries = page.locator('[data-testid^="other-name-"][data-testid$="-last-name"]');
   28 |     await expect(entries).toHaveCount(0);
   29 |     
   30 |     // Add button should not be visible when "No" is selected or nothing is selected
   31 |     const addButton = page.locator('[data-testid="add-other-name-button"]');
   32 |     await expect(addButton).not.toBeVisible();
   33 |   });
   34 |
   35 |   test('should render exactly 1 entry when user selects "Yes"', async ({ page }) => {
   36 |     // Select "Yes" for having other names
   37 |     await page.click('[data-testid="has-other-names-yes"]');
   38 |     
   39 |     // Should show exactly 1 entry
   40 |     const entries = page.locator('[data-testid^="other-name-"][data-testid$="-last-name"]');
   41 |     await expect(entries).toHaveCount(1);
   42 |     
   43 |     // Verify the entry is for index 0
   44 |     await expect(page.locator('[data-testid="other-name-0-last-name"]')).toBeVisible();
   45 |     
   46 |     // Add button should be visible and show (1/4)
   47 |     const addButton = page.locator('[data-testid="add-other-name-button"]');
   48 |     await expect(addButton).toBeVisible();
   49 |     await expect(addButton).toContainText('Add Another Name (1/4)');
   50 |   });
   51 |
   52 |   test('should allow adding more entries up to 4 total', async ({ page }) => {
   53 |     // Select "Yes" for having other names
   54 |     await page.click('[data-testid="has-other-names-yes"]');
   55 |     
   56 |     // Should start with 1 entry
   57 |     let entries = page.locator('[data-testid^="other-name-"][data-testid$="-last-name"]');
   58 |     await expect(entries).toHaveCount(1);
   59 |     
   60 |     const addButton = page.locator('[data-testid="add-other-name-button"]');
   61 |     
   62 |     // Add second entry
   63 |     await addButton.click();
   64 |     entries = page.locator('[data-testid^="other-name-"][data-testid$="-last-name"]');
   65 |     await expect(entries).toHaveCount(2);
   66 |     await expect(addButton).toContainText('Add Another Name (2/4)');
   67 |     
   68 |     // Add third entry
   69 |     await addButton.click();
   70 |     entries = page.locator('[data-testid^="other-name-"][data-testid$="-last-name"]');
   71 |     await expect(entries).toHaveCount(3);
   72 |     await expect(addButton).toContainText('Add Another Name (3/4)');
   73 |     
   74 |     // Add fourth entry
   75 |     await addButton.click();
   76 |     entries = page.locator('[data-testid^="other-name-"][data-testid$="-last-name"]');
   77 |     await expect(entries).toHaveCount(4);
   78 |     await expect(addButton).toContainText('Add Another Name (4/4)');
   79 |     
   80 |     // Button should be disabled now
   81 |     await expect(addButton).toBeDisabled();
   82 |     
   83 |     // Should show maximum message
   84 |     await expect(page.locator('text=Maximum of 4 other names allowed.')).toBeVisible();
   85 |   });
   86 |
   87 |   test('should clear all entries when user selects "No"', async ({ page }) => {
   88 |     // Select "Yes" and add some entries
   89 |     await page.click('[data-testid="has-other-names-yes"]');
   90 |     
   91 |     // Add another entry
   92 |     await page.click('[data-testid="add-other-name-button"]');
   93 |     
   94 |     // Should have 2 entries
   95 |     let entries = page.locator('[data-testid^="other-name-"][data-testid$="-last-name"]');
   96 |     await expect(entries).toHaveCount(2);
   97 |     
   98 |     // Select "No"
   99 |     await page.click('[data-testid="has-other-names-no"]');
  100 |     
  101 |     // Should have no entries
  102 |     entries = page.locator('[data-testid^="other-name-"][data-testid$="-last-name"]');
  103 |     await expect(entries).toHaveCount(0);
  104 |     
  105 |     // Add button should not be visible
  106 |     const addButton = page.locator('[data-testid="add-other-name-button"]');
  107 |     await expect(addButton).not.toBeVisible();
  108 |   });
  109 |
  110 |   test('should allow removing entries', async ({ page }) => {
  111 |     // Select "Yes" for having other names
  112 |     await page.click('[data-testid="has-other-names-yes"]');
  113 |     
  114 |     // Add another entry to have 2 total
  115 |     await page.click('[data-testid="add-other-name-button"]');
  116 |     
  117 |     // Should have 2 entries
  118 |     let entries = page.locator('[data-testid^="other-name-"][data-testid$="-last-name"]');
  119 |     await expect(entries).toHaveCount(2);
```